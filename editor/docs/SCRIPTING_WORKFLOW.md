# Custom Interaction Scripting in the Editor

## Overview: How Phone Booth Works, How We'll Edit It

Your `phonebooth.js` is a perfect example of a complex interaction that combines:
- **State management** (ringing â†’ answered â†’ dropped)
- **Object reparenting** (receiver from phonebooth to camera)
- **Lerp animations** (smooth position/rotation transitions)
- **Physics integration** (PhoneCord with Rapier joints)
- **Event listening** (animation:finished, state:changed)
- **Per-frame updates** (update loop)

The editor needs to support **both** visual scripting for common patterns AND direct JavaScript for complex custom logic.

---

## Part 1: The Three-Tier Scripting System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SCRIPTING SYSTEM ARCHITECTURE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TIER 1: VISUAL SCRIPTING (No Code Required)                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  Events   â”‚â†’ â”‚ Conditionsâ”‚â†’ â”‚ Actions   â”‚â†’ â”‚ Outcomes  â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  Good for: Simple triggers, basic interactions, dialog flow       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†• Convert to                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TIER 2: COMPONENT COMPOSITION (Drag-and-Drop Modules)         â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Reparent Object â”‚  â”‚ Lerp Transform  â”‚  â”‚ Play Audio   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ (drag to target)â”‚  â”‚ (easing curves) â”‚  â”‚ (spatial 3D) â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ Physics Chain   â”‚  â”‚ Trigger Zone    â”‚  â”‚ Timeline     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ (PhoneCord)      â”‚  â”‚ (Enter/Exit)    â”‚  â”‚ (Sequences)  â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  Good for: Common patterns, reusable behaviors,                 â”‚   â”‚
â”‚  â”‚           medium complexity WITHOUT writing code               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†• Edit Source                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  TIER 3: JAVASCRIPT EDITOR (Full Power)                        â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚  import * as THREE from "three";                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  import { GAME_STATES } from "../gameData.js";          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚                                                          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  export default class PhoneBooth {                       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    constructor(options) { ... }                          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    initialize(gameManager) { ... }                       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    update(dt) { ... }                                    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  }                                                       â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  Good for: Complex custom logic, physics, new systems          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Part 2: Tier 1 - Visual Scripting (No Code)

### Visual Script Graph Interface

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  VISUAL SCRIPT EDITOR: phonebooth_pickup                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚   â”‚ EVENT        â”‚    â”‚ CONDITION    â”‚    â”‚ ACTION        â”‚     â”‚   â”‚
â”‚  â”‚   â”‚              â”‚    â”‚              â”‚    â”‚              â”‚     â”‚   â”‚
â”‚  â”‚   â”‚ Player       â”‚â”€â”€â”€>â”‚ Distance     â”‚â”€â”€â”€>â”‚ Reparent     â”‚     â”‚   â”‚
â”‚  â”‚   â”‚ Clicks       â”‚    â”‚ < 2.0m       â”‚    â”‚ Receiver to  â”‚     â”‚   â”‚
â”‚  â”‚   â”‚ Phonebooth   â”‚    â”‚              â”‚    â”‚ Camera       â”‚     â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                            â”‚                                   â”‚   â”‚
â”‚  â”‚                            â–¼                                   â”‚   â”‚
â”‚  â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚  â”‚                     â”‚ Lerp         â”‚    â”‚ Play Dialog  â”‚     â”‚   â”‚
â”‚  â”‚                     â”‚ Transform    â”‚    â”‚ "Hello?"     â”‚     â”‚   â”‚
â”‚  â”‚                     â”‚ 1.5s ease    â”‚    â”‚              â”‚     â”‚   â”‚
â”‚  â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚   [+ Add Node] â”€â”€ [Event | Condition | Action | Flow]          â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  Available Nodes:                                                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚ EVENTS         â”‚ â”‚ CONDITIONS     â”‚ â”‚ ACTIONS         â”‚             â”‚
â”‚  â”‚ â€¢ On Click      â”‚ â”‚ â€¢ Distance     â”‚ â”‚ â€¢ Reparent      â”‚             â”‚
â”‚  â”‚ â€¢ On Enter Zone â”‚ â”‚ â€¢ State Check  â”‚ â”‚ â€¢ Lerp Transformâ”‚             â”‚
â”‚  â”‚ â€¢ On State      â”‚ â”‚ â€¢ Flag Check   â”‚ â”‚ â€¢ Play Dialog   â”‚             â”‚
â”‚  â”‚ â€¢ On Animation  â”‚ â”‚ â€¢ Has Item     â”‚ â”‚ â€¢ Set Flag      â”‚             â”‚
â”‚  â”‚ â€¢ On Key Press  â”‚ â”‚ â€¢ Timer        â”‚ â”‚ â€¢ Change State  â”‚             â”‚
â”‚  â”‚ â€¢ Custom Event  â”‚ â”‚ â€¢ And/Or/Not   â”‚ â”‚ â€¢ Call Function â”‚             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Example: Phone Booth Pickup in Visual Scripting

```
EVENT: On Animation Finished (phonebooth-ring)
  â”‚
  â”œâ”€CONDITION: Animation ID == "phonebooth-ring"
  â”‚
  â””â”€ACTION: Reparent Object
       â”œâ”€ Source: phonebooth.Receiver
       â”œâ”€ Target: Camera
       â””â”€ Preserve World Position: â˜‘
       â”‚
       â””â”€ACTION: Lerp Transform
            â”œâ”€ Target: phonebooth.Receiver
            â”œâ”€ Duration: 1.5s
            â”œâ”€ Position: { x: -0.3, y: 0, z: -0.3 } (local to camera)
            â”œâ”€ Rotation: { x: -0.5, y: -0.5, z: -90Â° }
            â””â”€ Easing: Cubic Out
```

### Generated Code from Visual Script

The visual editor generates JavaScript automatically:

```javascript
// Generated from visual script: phonebooth_pickup
export const visualScripts = [
  {
    id: "phonebooth_pickup",
    event: "animation:finished",
    criteria: { animationId: "phonebooth-ring" },
    actions: [
      {
        type: "reparent",
        source: "phonebooth.Receiver",
        target: "camera",
        preserveWorldPosition: true
      },
      {
        type: "lerp",
        target: "phonebooth.Receiver",
        duration: 1.5,
        position: { x: -0.3, y: 0, z: -0.3 },
        rotation: { x: -0.5, y: -0.5, z: -Math.PI / 2 },
        easing: "cubicOut"
      }
    ]
  }
];
```

---

## Part 3: Tier 2 - Component Composition (Reusable Modules)

### Component Browser

For complex reusable behaviors like PhoneCord, we create drag-and-drop components:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COMPONENT BROWSER                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ğŸ” [Search components...]                                     â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ“¦ PHYSICS                                              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ PhoneCord              (Physics chain with droop)    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ RopeConstraint        (Distance-based constraint)    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ HingeJoint            (Rotational constraint)        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ TriggerVolume         (Enter/exit detection)         â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ¬ ANIMATION                                            â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ LerpTransform         (Smooth position animation)   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ ReparentObject        (Move between parents)        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ LookAt               (Face target object)           â”‚   â”‚ â”‚
â”‚  â”‚  â”‚   â€¢ FollowPath           (Move along curve)            â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ”Š AUDIO                                                â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ PlayDialog            (Voice with captions)         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ PlaySFX              (Spatial sound effect)          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ PlayMusic            (Crossfade background)         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ AudioReactiveLight   (Light pulses to audio)        â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ® INTERACTION                                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Clickable             (Respond to clicks)           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Holdable              (Pick up and carry)           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Inspectable           (Examine in detail)           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Conversational        (Dialog tree)                â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  [+ Create Custom Component]                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phone Booth as Component Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OBJECT: phonebooth                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  COMPONENTS                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ“¦ PhoneCord                                             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  cordAttach: phonebooth.CordAttach                       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  receiver: phonebooth.Receiver                           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  config: {                                               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    cordSegments: 12                                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    cordSegmentLength: 0.05                              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    cordRigidSegments: 0                                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚    initMode: "horizontal"                               â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  }                                                       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  [âš™ï¸ Configure]  [ğŸ“– Docs]  [ğŸ” Source]                   â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ“¦ ReparentOnAnimation                                   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  listenFor: "animation:finished"                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  animationId: "phonebooth-ring"                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  source: phonebooth.Receiver                            â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  target: Camera                                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  [âš™ï¸ Configure]  [ğŸ” Source]                               â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ“¦ LerpTransform                                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  target: phonebooth.Receiver                            â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  targetPos: { x: -0.3, y: 0, z: -0.3 }                 â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  targetRot: { x: -0.5, y: -0.5, z: -90Â° }              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  duration: 1.5s                                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  easing: cubicOut                                       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  [âš™ï¸ Configure]  [ğŸ” Source]                               â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ“¦ StateChangeListener                                    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  from: ANSWERED_PHONE                                    â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  notState: true                                         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  action: stopLerp                                       â”‚   â”‚   â”‚
â”‚  â”‚  â”‚  [âš™ï¸ Configure]  [ğŸ” Source]                               â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  [+ Add Component]                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Configuration Panel

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONFIGURE: PhoneCord Component                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Attach Points                                                   â”‚   â”‚
â”‚  â”‚  Cord Attach: [phonebooth.CordAttach â–¼]  [Pick in Scene]        â”‚   â”‚
â”‚  â”‚  Receiver:    [phonebooth.Receiver â–¼]     [Pick in Scene]        â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  Chain Configuration                                              â”‚   â”‚
â”‚  â”‚  Segments:          [12] â–²â–¼                                      â”‚   â”‚
â”‚  â”‚  Segment Length:   [0.05] â–²â–¼ (meters)                           â”‚   â”‚
â”‚  â”‚  Segment Radius:   [0.002] â–²â–¼ (meters)                          â”‚   â”‚
â”‚  â”‚  Rigid Segments:  [0] â–²â–¼ (at attach point)                      â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  Physics                                                          â”‚   â”‚
â”‚  â”‚  Mass:             [0.002] â–²â–¼ (kg per segment)                  â”‚   â”‚
â”‚  â”‚  Linear Damping:   [8.0] â–²â–¼                                      â”‚   â”‚
â”‚  â”‚  Angular Damping:  [8.0] â–²â–¼                                      â”‚   â”‚
â”‚  â”‚  Droop Amount:     [2.0] â–²â–¼                                      â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  Initialization                                                   â”‚   â”‚
â”‚  â”‚  Mode: â—‹ Horizontal (phonebooth)  â— Straight (candlestick)     â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  Visual                                                           â”‚   â”‚
â”‚  â”‚  Color:        [ğŸŸ§ #808080]                                     â”‚   â”‚
â”‚  â”‚  Tube Radius:  [0.008] â–²â–¼ (meters)                             â”‚   â”‚
â”‚  â”‚  Metalness:    [0.3] â–²â–¼                                        â”‚   â”‚
â”‚  â”‚  Roughness:    [0.8] â–²â–¼                                        â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  Collision Groups                                                â”‚   â”‚
â”‚  â”‚  Belongs to:   [0x0002] Cord                                    â”‚   â”‚
â”‚  â”‚  Collides with: [â˜‘ Environment] â–¡ Player                        â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚   â”‚
â”‚  â”‚  â”‚   Apply   â”‚  â”‚   Reset   â”‚  â”‚  Cancel   â”‚                    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  [ğŸ” View Source Code]  [ğŸ“– Documentation]                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Part 4: Tier 3 - JavaScript Editor (Full Power)

### When to Use JavaScript

Use the code editor when you need:
- Complex update loops
- Custom physics logic
- Performance-critical code
- Novel interactions (no component exists yet)
- Integration with external systems

### Integrated Script Editor

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SCRIPT EDITOR: phonebooth.js                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  File  Edit  View  Find  Run  Tools                            â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚   â”‚
â”‚  â”‚  1   â”‚ import * as THREE from "three";                          â”‚   â”‚
â”‚  â”‚  2   â”‚ import { GAME_STATES } from "../gameData.js";            â”‚   â”‚
â”‚  â”‚  3   â”‚ import { Logger } from "../utils/logger.js";             â”‚   â”‚
â”‚  â”‚  4   â”‚ import { checkCriteria } from "../utils/criteriaHelper.js";â”‚   â”‚
â”‚  â”‚  5   â”‚ import PhoneCord from "./phoneCord.js";                  â”‚   â”‚
â”‚  â”‚  6   â”‚                                                           â”‚   â”‚
â”‚  â”‚  7   â”‚ export default class PhoneBooth {                         â”‚   â”‚
â”‚  â”‚  8   â”‚   constructor(options = {}) {                             â”‚   â”‚
â”‚  â”‚  9   â”‚     this.sceneManager = options.sceneManager;             â”‚   â”‚
â”‚  â”‚ 10   â”‚     this.lightManager = options.lightManager;             â”‚   â”‚
â”‚  â”‚  11   â”‚     // ...                                              â”‚   â”‚
â”‚  â”‚ 12   â”‚   }                                                       â”‚   â”‚
â”‚  â”‚ 13   â”‚                                                           â”‚   â”‚
â”‚  â”‚ 14   â”‚   initialize(gameManager = null) {                        â”‚   â”‚
â”‚  â”‚ 15   â”‚     // Listen for animation finished                      â”‚   â”‚
â”‚  â”‚ 16   â”‚     this.sceneManager.on("animation:finished", ...);     â”‚   â”‚
â”‚  â”‚  â”‚     // ...                                                  â”‚   â”‚
â”‚  â”‚ 18   â”‚   }                                                       â”‚   â”‚
â”‚  â”‚ 19   â”‚                                                           â”‚   â”‚
â”‚  â”‚ 20   â”‚   update(dt) {                                            â”‚   â”‚
â”‚  â”‚ 21   â”‚     this.updateReceiverLerp(dt);                          â”‚   â”‚
â”‚  â”‚ 22   â”‚     if (this.phoneCord) {                                â”‚   â”‚
â”‚  â”‚ 23   â”‚       this.phoneCord.update();                           â”‚   â”‚
â”‚  â”‚ 24   â”‚     }                                                     â”‚   â”‚
â”‚  â”‚ 25   â”‚   }                                                       â”‚   â”‚
â”‚  â”‚ 26   â”‚ }                                                         â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  Line: 7  Column: 45  UTF-8  JavaScript                              â”‚
â”‚  âš ï¸  2 warnings  â”‚  âŒ 0 errors  â”‚  âœ… Ready                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Editor Features

1. **Syntax Highlighting** - Full JavaScript/TypeScript support
2. **IntelliSense** - Auto-complete for Three.js, engine APIs
3. **Live Reload** - Changes apply without full game restart
4. **Error Display** - Inline errors with suggestions
5. **Debug Panel** - Inspect variables, set breakpoints
6. **Minimap** - Navigate large files quickly
7. **Multi-file Tabs** - Edit PhoneCord alongside PhoneBooth
8. **Git Integration** - See diffs, commit changes

### Live Reload Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”´ LIVE RELOAD ACTIVE                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚   You edited: phonebooth.js                                      â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚   Changes:                                                        â”‚   â”‚
â”‚  â”‚   â€¢ Line 52: Changed lerp duration 1.5 â†’ 2.0                     â”‚   â”‚
â”‚  â”‚   â€¢ Line 134: Added new state check for DRIVE_BY                 â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚   â”‚
â”‚  â”‚   â”‚  Reload   â”‚  â”‚  Cancel   â”‚                                 â”‚   â”‚
â”‚  â”‚   â”‚  Scene    â”‚  â”‚  Changes  â”‚                                 â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚   â˜‘ Auto-reload on save                                          â”‚   â”‚
â”‚  â”‚   â˜‘ Preserve current game state                                  â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                          â”‚
â”‚  Reloading in 3... 2... 1...                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Script Lifecycle API

All interaction scripts follow a standard interface:

```javascript
/**
 * Interaction Script Interface
 * All custom scripts must implement these methods
 */
export default class CustomInteraction {
  /**
   * Constructor - receives injected dependencies
   * @param {Object} options - Configuration and injected managers
   */
  constructor(options = {}) {
    // Injected managers
    this.sceneManager = options.sceneManager;
    this.physicsManager = options.physicsManager;
    this.lightManager = options.lightManager;
    this.sfxManager = options.sfxManager;
    this.gameManager = options.gameManager;  // Set in initialize()
    this.scene = options.scene;
    this.camera = options.camera;
    this.characterController = options.characterController;

    // Your state
    this.customState = null;
  }

  /**
   * Initialize - called when scene loads
   * Set up event listeners, create objects
   * @param {GameManager} gameManager - The central game state manager
   */
  initialize(gameManager = null) {
    this.gameManager = gameManager;

    // Check if your object exists
    if (!this.sceneManager.hasObject("myObject")) {
      return;  // Skip if not in this scene
    }

    // Listen to events
    this.gameManager.on("state:changed", (newState, oldState) => {
      // Respond to state changes
    });

    this.sceneManager.on("animation:finished", (animId) => {
      // Respond to animation events
    });
  }

  /**
   * Update - called every frame
   * @param {number} dt - Delta time in seconds
   */
  update(dt) {
    // Per-frame updates (animations, physics sync, etc.)
  }

  /**
   * Clean up - called when scene unloads
   */
  destroy() {
    // Remove listeners, destroy objects
  }

  /**
   * Optional: Expose methods for visual scripting
   */
  exposedMethods = {
    // Methods that can be called from visual scripts
    pickup: () => this.reparentReceiver(),
    drop: () => this.dropReceiverWithPhysics(),
    setTarget: (pos) => this.setReceiverTargetPosition(pos)
  };
}
```

---

## Part 5: Converting Between Tiers

### Visual Script â†’ Generated Code

Any visual script can be converted to JavaScript:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CONVERT SCRIPT                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Current Type: Visual Script                                     â”‚   â”‚
â”‚  â”‚  Convert to: â—‹ Visual Script  â— JavaScript  â—‹ Component       â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  Generated Preview:                                              â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ // Generated from visual script: phonebooth_pickup      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ export default {                                        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   id: "phonebooth_pickup",                              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   event: "animation:finished",                          â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   criteria: { animationId: "phonebooth-ring" },         â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   actions: [                                           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚     { type: "reparent", source: "phonebooth.Receiver",  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚       target: "camera", preserveWorldPosition: true },  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚     { type: "lerp", ... }                              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   ]                                                     â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ };                                                      â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚   â”‚
â”‚  â”‚  â”‚  Convert  â”‚  â”‚  Cancel   â”‚                                 â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### JavaScript â†’ Visual Script (Where Possible)

Simple JavaScript patterns can be recognized and converted to visual nodes:

```javascript
// This JavaScript:
this.gameManager.on("state:changed", (newState) => {
  if (newState.currentState === GAME_STATES.DRIVE_BY) {
    this.dropReceiverWithPhysics();
  }
});

// Converts to visual graph:
EVENT: State Changed
  â”‚
  â””â”€CONDITION: State == DRIVE_BY
       â”‚
       â””â”€ACTION: Call Method
            â”œâ”€ Object: phonebooth
            â””â”€ Method: dropReceiverWithPhysics()
```

---

## Part 6: Phone Booth as Tier 3 Script (Hybrid Approach)

For the phone booth, we'd use a hybrid approach:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OBJECT: phonebooth                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  BEHAVIOR MODE                                                  â”‚   â”‚
â”‚  â”‚  â— Visual + Components  â—‹ Full JavaScript                      â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  VISUAL SCRIPTS (No Code):                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ 1. On Animation Finished â†’ Reparent Receiver â†’ Camera   â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ 2. On State Exit (ANSWERED_PHONE) â†’ Stop Lerp           â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ 3. On State Enter (DRIVE_BY) â†’ Drop Receiver           â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  COMPONENTS (Drag-and-Drop):                                    â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ PhoneCord (physics chain with droop)                  â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ LerpTransform (receiver pickup animation)             â”‚   â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ StateChangeListener (cleanup on state exit)           â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  CUSTOM CODE (For Complex Parts):                               â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚  â”‚ phonebooth.js (extends base class)                      â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Custom update loop for lerp smoothing              â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Position locking when leaving ANSWERED_PHONE        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Dropped state initialization (debug spawning)        â”‚   â”‚   â”‚
â”‚  â”‚  â”‚   â€¢ Receiver position locking                          â”‚   â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                   â”‚   â”‚
â”‚  â”‚  [âš™ï¸ Configure Components]  [ğŸ“ Edit Code]                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Generated Structure File

```javascript
// phonebooth.scene.json
{
  "id": "phonebooth",
  "type": "gltf",
  "asset": "assets/models/phonebooth.glb",
  "position": { "x": 0, "y": 0, "z": 0 },
  "interaction": {
    "type": "script",
    "script": "phonebooth.js",  // Main script file
    "visualScripts": [
      {
        "id": "pickup",
        "event": "animation:finished",
        "criteria": { "animationId": "phonebooth-ring" },
        "actions": [
          { "type": "reparent", "source": "phonebooth.Receiver", "target": "camera" },
          { "type": "lerp", "target": "phonebooth.Receiver", "duration": 1.5 }
        ]
      }
    ],
    "components": [
      {
        "type": "PhoneCord",
        "config": {
          "cordSegments": 12,
          "cordSegmentLength": 0.05,
          "cordRigidSegments": 0,
          "initMode": "horizontal"
        }
      }
    ],
    "config": {
      "receiverTargetPos": { "x": -0.3, "y": 0, "z": -0.3 },
      "receiverTargetRot": { "x": -0.5, "y": -0.5, "z": -90 },
      "receiverLerpDuration": 1.5,
      "cordCriteria": { "currentState": { "$lt": 13 } }
    }
  }
}
```

---

## Part 7: Component Library (Building Blocks)

### Built-in Components

The engine includes a library of reusable components:

| Component | Description | Config |
|-----------|-------------|--------|
| **PhoneCord** | Physics-based cord with droop | segments, length, droop |
| **LerpTransform** | Smooth position/rotation animation | duration, easing, target |
| **ReparentObject** | Move object between parents | source, target, preserveWorld |
| **StateChangeListener** | React to state changes | from, to, action |
| **TriggerZone** | Enter/exit detection | shape, size, trigger |
| **Holdable** | Pick up and carry objects | holdPosition, dropPhysics |
| **Inspectable** | Examine object details | inspectionDistance, camera |
| **AudioReactive** | Light/object pulses to audio | frequency, strength |
| **FollowPath** | Move along curve | path, speed, loop |
| **LookAt** | Face target object | target, speed, axis |

### Creating Custom Components

Any script can become a reusable component:

```javascript
// components/CustomSwingDoor.js
import { Component } from "../engine/Component.js";

export default class CustomSwingDoor extends Component {
  static componentInfo = {
    name: "Swinging Door",
    category: "Physics",
    description: "A door that swings open when approached",
    icon: "ğŸšª",
    config: [
      { name: "swingAngle", type: "number", default: 90, min: -180, max: 180 },
      { name: "swingSpeed", type: "number", default: 2, min: 0.1, max: 10 },
      { name: "autoClose", type: "boolean", default: true },
      { name: "closeDelay", type: "number", default: 3, min: 0, max: 30 }
    ]
  };

  constructor(config) {
    super(config);
    this.currentAngle = 0;
    this.targetAngle = 0;
    this.isOpen = false;
  }

  initialize() {
    // Create hinge joint, setup trigger zone
  }

  update(dt) {
    // Lerp door angle
    const diff = this.targetAngle - this.currentAngle;
    this.currentAngle += diff * this.config.swingSpeed * dt;
    this.object.rotation.y = this.currentAngle;
  }

  onPlayerEnter() {
    this.isOpen = true;
    this.targetAngle = this.config.swingAngle;
  }

  onPlayerExit() {
    if (this.config.autoClose) {
      setTimeout(() => {
        this.isOpen = false;
        this.targetAngle = 0;
      }, this.config.closeDelay * 1000);
    }
  }
}
```

After creating, it appears in the Component Browser automatically!

---

## Summary: How We'll Script Anything

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DECISION TREE: HOW TO SCRIPT                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  What do you need to do?                                                 â”‚
â”‚                                                                           â”‚
â”‚  â””â”€ Simple trigger? (click, enter zone, state change)                   â”‚
â”‚      â”‚                                                                   â”‚
â”‚      â””â”€ Use VISUAL SCRIPTING                                             â”‚
â”‚          Drag Event â†’ Condition â†’ Action nodes                           â”‚
â”‚                                                                           â”‚
â”‚  â””â”€ Common pattern? (pickup, follow, dialog, lerp)                      â”‚
â”‚      â”‚                                                                   â”‚
â”‚      â””â”€ Use COMPONENT SYSTEM                                             â”‚
â”‚          Drag component onto object â†’ Configure parameters               â”‚
â”‚                                                                           â”‚
â”‚  â””â”€ Complex custom logic? (physics, novel interaction)                   â”‚
â”‚      â”‚                                                                   â”‚
â”‚      â””â”€ Use JAVASCRIPT EDITOR                                            â”‚
â”‚          Write custom class implementing lifecycle methods               â”‚
â”‚                                                                           â”‚
â”‚  â””â”€ Mix of all three?                                                   â”‚
â”‚      â”‚                                                                   â”‚
â”‚      â””â”€ Use HYBRID APPROACH                                             â”‚
â”‚          Visual scripts for triggers + Components for behavior +         â”‚
â”‚          Custom code for complex parts                                   â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phone Booth, Re-imagined

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  phonebooth - COMPLETE CONFIGURATION                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”‚
â”‚  BEHAVIOR: Hybrid (Visual + Components + Custom Code)                   â”‚
â”‚                                                                           â”‚
â”‚  TRIGGERS (Visual Scripting):                                            â”‚
â”‚  â€¢ animation:finished (phonebooth-ring) â†’ reparent receiver              â”‚
â”‚  â€¢ state:changed (ANSWERED_PHONE) â†’ stop lerp, lock position             â”‚
â”‚  â€¢ state:changed (DRIVE_BY) â†’ drop receiver with animation               â”‚
â”‚                                                                           â”‚
â”‚  COMPONENTS (Drag-and-Drop):                                             â”‚
â”‚  â€¢ PhoneCord (12 segments, horizontal mode, 2.0 droop)                  â”‚
â”‚  â€¢ LerpTransform (receiver to camera, 1.5s, cubic out)                   â”‚
â”‚  â€¢ AudioReactiveLight (ringing light, pulse to audio)                    â”‚
â”‚                                                                           â”‚
â”‚  CUSTOM CODE (JavaScript):                                               â”‚
â”‚  â€¢ updateReceiverLerp() - Custom easing function                         â”‚
â”‚  â€¢ updateReceiverDropLerp() - Drop animation with flip                   â”‚
â”‚  â€¢ positionLocking - When leaving ANSWERED_PHONE                         â”‚
â”‚  â€¢ initializeReceiverInDroppedState() - Debug spawning                   â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Everything that can be visual, IS visual. Only the truly complex needs code.**
