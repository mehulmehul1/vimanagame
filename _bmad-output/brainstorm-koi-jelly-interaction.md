# Brainstorm: Koi-Like Jelly Interaction Design

**Date:** 2026-01-24  
**New Understanding:** Jellies are swimming creatures in water (like koi), not spawning/disappearing  
**Goal:** Create clear teaching interaction with swimming jellies in water

---

## Core Insight: The "Singing Water" Metaphor

The jellies aren't separate creatures that approach the harp - they're **part of the water itself**.

```
Visual Setup:
- 6 jellies swim gracefully in water (koi-like movement)
- Beautiful flowing paths, natural curves
- Bioluminescent, pulse with water's rhythm
- Always present, ambient part of the scene

Interaction Metaphor:
- Jelly doesn't "go to" string
- Jelly swims **under** where the string meets the water
- Water and string above it respond to jelly's presence
- "The water sings through the string"
```

---

## Approach 1: "The Resonant String" - Direct Connection

### How It Works

```
Demonstration Phase:
1. Target jelly swims to position directly under string
   • Smooth, flowing path (not teleporting)
   • Arrives at water surface point below string
   
2. Jelly positions itself exactly under string's water point
   • Hovering at water surface (y = 0)
   • Looking upward toward string
   • Pulsing with teaching rhythm
   
3. String RESPONDS to jelly below
   • String begins to glow from bottom (water level)
   • Glow travels UP the string
   • String vibrates/pulses in sync with jelly
   • Connection: Jelly pulse ↔ String pulse
   
4. Note plays through speakers
   • Sound seems to come FROM THE WATER
   • Echoes upward through the string
   • Visual: Water ripples spread from jelly's position

Player Response:
5. Player clicks the glowing/vibrating string
   • Can click at any time (no timing pressure)
   
6. Correct click:
   • String flashes brightly (white)
   • Jelly spins up in water (celebration)
   • Harmony chord plays (jelly + string together)
   • Jelly swims away, returns to ambient swimming
   
7. Wrong click:
   • String glows amber briefly
   • Jelly bobs gently (like "hmm")
   • Target string pulses more rapidly
   • No reset, target string keeps glowing
```

### Why This Works

**Natural Metaphor:**
- Jelly in water ↔ String above water
- They're connected through the water medium
- "The water sings, the string amplifies"

**Visual Clarity:**
- Only one visual signal: **GLOWING STRING**
- Jelly is always visible (ambient)
- Connection is obvious (jelly under glowing string)

**Emotional Feel:**
- Jelly and string are partners, not teacher/student
- Both contribute to the music
- Harmony = cooperation, not correctness

---

## Approach 2: "The Ripple Pattern" - Water-Based Teaching

### How It Works

```
Demonstration Phase:
1. Target jelly swims to center of chamber
   • All jellies visible, ambient swimming
   • Target jelly rises slightly (indicates "I'm teaching")
   
2. Jelly creates ripple pattern on water
   • Circular ripples emanate from jelly's position
   • Ripples travel toward target string's water point
   • Visual "path" of light on water surface
   • Like light showing the way
   
3. Ripples reach target string position
   • Water surface at string's base glows
   • String begins to glow from water level up
   • Connection: Ripple path → String glow
   
4. Note plays
   • Sound follows ripple path
   • Audible echo from water to string
   
Player Response:
5. Player clicks glowing string
   
6. Correct:
   • Ripple pattern accelerates and brightens
   • Jelly spins in celebration
   • Harmony chord plays
   
7. Wrong:
   • Ripple pattern pauses briefly
   • Wrong string's water surface ripples amber
   • New ripple path forms to correct string
```

### Why This Works

**Water-Centric:**
- Jellies never leave water
- All communication through water medium
- Ripples are natural water behavior

**Visual Story:**
- Light travels from jelly to string
- Player follows the "path of light"
- Beautiful, poetic moment

---

## Approach 3: "The Bioluminescent Cone" - Light Projection

### How It Works

```
Demonstration Phase:
1. Target jelly swims under target string
   • All jellies visible in water
   • Target rises slightly (teaching indicator)
   
2. Jelly emits cone of light upward
   • Cone starts at jelly's position (water level)
   • Widens as it goes up
   • Illuminates the string above
   • String glows where light cone touches it
   
3. Light cone is the teaching signal
   • Single, clear visual: "This string is lit"
   • Cone pulses with jelly's rhythm
   • String pulses in sync
   
4. Note plays
   • Sound emanates from the light cone
   • Visual: Light vibrates with note frequency
   
Player Response:
5. Player clicks illuminated string
   
6. Correct:
   • Light cone intensifies and turns white
   • Jelly celebrates (spin, brighter pulse)
   • Harmony chord plays
   
7. Wrong:
   • Light cone dims briefly
   • Wrong string gets amber light cone
   • Target jelly swims slightly to adjust position
   • Original cone reestablishes
```

### Why This Works

**Single Visual Signal:**
- Light cone = "This string is active"
- Unambiguous, obvious

**Beautiful Metaphor:**
- Jelly projects its voice upward
- String catches and amplifies the light
- "The water sings to the sky"

---

## Approach 4: "The Koi School" - All 6 Together

### How It Works

```
Ambient State:
- All 6 jellies swim together in water
- Beautiful choreography, koi-like schooling
- Peaceful, mesmerizing to watch
- Each jelly naturally positioned near its string

Teaching Phase:
1. Target jelly rises in water
   • Jumps up slightly (breaks surface)
   • Lands back with splash effect
   • Now elevated in water column (y = 0.5)
   
2. Target jelly's string responds
   • String glows from water level up
   - Connection: Elevated jelly ↔ Glowing string
   
3. Other 5 jellies circle around
   • Form school around target jelly
   • Softly pulsing (backing harmony)
   • Visual support, not distraction
   
4. Note plays
   • Sound seems to come from the jelly's position
   • Ripples spread through water
   
Player Response:
5. Player clicks glowing string
   
6. Correct:
   • All 6 jellies spin up in celebration (synchronized)
   • Target string flashes white
   • Full harmony chord plays (all 6 jellies contribute)
   • Beautiful moment: entire school celebrates
   
7. Wrong:
   • Wrong string glows amber
   • Target jelly bobs once ("hmm")
   • Neighboring jellies turn toward target string
   • Target string pulses more rapidly
   
Progression:
- Each note: different jelly rises (C → D → E → F → G → A)
- School moves with each target
- Beautiful: jellies choreograph around each teaching moment
```

### Why This Works

**Always Present:**
- No waiting for spawns
- All jellies visible from start
- Player sees whole "school"

**Choreographed Beauty:**
- Jellies move together organically
- Each teaching moment is visually rich
- Celebration involves entire group

**Natural Difficulty:**
- Harder to click wrong when all 6 are visible
- Each string has its jelly visibly associated

---

## Recommended: Approach 1 + Koi School Elements

### Hybrid Design

**Ambient State:**
```
- All 6 jellies swim in water (koi-like)
- Each naturally near its string's water position
- Beautiful flowing paths, ambient
- Player can watch them anytime
```

**Teaching Phase:**
```
1. Target jelly rises in water (y = 0.5)
   • Breaks surface slightly, splash effect
   • Now clearly "above" other jellies
   
2. Other jellies circle around target
   • Form loose school formation
   • Soft backing pulse (not distracting)
   
3. Target jelly's string glows from water level
   • String resonates with jelly's position
   • Visual connection: Jelly below ↔ String above
   
4. Note plays, ripples spread
```

**Player Response:**
```
5. Player clicks glowing string (anytime, no timer)
   
6. Correct:
   • All 6 jellies celebrate (synchronized spin)
   • String flashes white
   • Harmony chord plays
   
7. Wrong:
   • Wrong string glows amber briefly
   • Target jelly bobs once
   • Neighboring jellies turn toward target
   • Target string pulses more rapidly
```

**Progression:**
```
Sequence 1 (Single Notes):
- C, D, E (strings 0, 1, 2)
- Each: different jelly rises, string glows
- Completion: C major chord, all jellies celebrate

Sequence 2 (Pairs):
- C→D, E→F, G→A
- Jelly rises, string glows, player clicks, jelly stays up for second note
- Completion: All 6 strings light up, full harmony

Sequence 3 (Phrase):
- C→D→E→F→G→A
- Each jelly rises in sequence
- Final completion: Chamber illuminated, vortex activates
```

---

## Visual Language: Water-Centric

### Color Coding (Water-Aware)

```
AMBIENT SWIM:   Soft Bioluminescent (Cyan, alpha 0.4)
  Meaning: "I'm part of the water"
  
TEACHING:        Bright Cyan (0xFFFFFF to 0x00FFFF)
  Meaning: "I'm showing you this string"
  
STRING GLOW:     Cyan to White gradient (bottom to top)
  Meaning: "This string is singing"
  
SUCCESS:         White Flash (0xFFFFFF, duration 0.3s)
  Meaning: "We harmonized!"
  
WRONG ATTEMPT:   Amber Ripples (0xFFAA00, water surface)
  Meaning: "Hmm, not this one"
  
CELEBRATION:     Rainbow Bioluminescence (cycling colors)
  Meaning: "Music is beautiful!"
```

### Motion: Koi-Natural

```
SWIM:           Smooth curve with sine wave drift
  "Natural water movement, organic curves"
  
RISE:           Spring-like jump (easeOutBack, 0.5s)
  "Breaks surface, then settles"
  
HOVER:          Gentle bob (sine, amplitude 0.15, rate 0.8Hz)
  "Waiting at water surface"
  
CELEBRATE:       Spiral up + spin (0.8s)
  "Joyful water movement"
  
BOB:            Quick down-up (0.2s each)
  "Thinking, curious"
  
CIRCLE:          Elliptical path around target
  "School formation, supporting"
```

---

## Technical Implementation

### Jelly Swimming System

```typescript
class JellySwimmer {
    position: THREE.Vector3; // In water (y between -2 and 0)
    targetPosition: THREE.Vector3; // Where to swim
    swimming: boolean;
    
    // Koi-like movement
    swimTo(target: THREE.Vector3, duration: number) {
        // Bezier curve with natural drift
        // Add sine wave vertical oscillation
        // Maintain y between -2 and 0 (stay in water)
    }
    
    // Teaching position
    riseToTeaching(stringWaterPosition: THREE.Vector3) {
        // Animate y from 0 to 0.5 (break surface)
        // Small splash particle effect
    }
    
    // Return to ambient
    descendToAmbient() {
        // Animate y from 0.5 to 0 (back in water)
        // Merge with school formation
    }
}
```

### String-Jelly Connection

```typescript
class StringJellyConnection {
    jelly: JellySwimmer;
    stringMesh: THREE.Mesh;
    
    // When jelly is teaching
    activateTeaching() {
        // Start glow at string base (water level)
        // Animate glow intensity: 0 → 1
        // Make string pulse in sync with jelly
        // Visual line from jelly to string base (optional, subtle)
    }
    
    // When player clicks
    handleClick(stringIndex: number) {
        if (correct) {
            this.flashWhite();
            this.jelly.celebrate();
            this.playHarmony();
        } else {
            this.flashAmber();
            this.jelly.bobCurious();
            this.pulseTargetMore();
        }
    }
}
```

### Water Response System

```typescript
class WaterResponse {
    // When jelly is teaching
    createRipplePattern(jellyPosition: THREE.Vector3, targetString: THREE.Vector3) {
        // Circular ripples emanating from jelly
        // Optional: Ripple path leading to string
    }
    
    // When wrong note
    createAmberRipple(stringWaterPosition: THREE.Vector3) {
        // Amber-colored ripples at wrong string's water point
        // Duration 0.5s
    }
    
    // When correct
    createCelebrationRipples(allJellyPositions: THREE.Vector3[]) {
        // All 6 positions ripple simultaneously
        // Rainbow-colored
    }
}
```

---

## Success Criteria

### Player Experience

**Immediate Clarity:**
- ✅ Player sees all jellies from start
- ✅ Target jelly rises = clear teaching signal
- ✅ String glows = unambiguous interaction target
- ✅ No confusion about which string

**Emotional Arc:**
- ✅ Wonder (watching beautiful koi swim)
- ✅ Understanding (jelly rises, string glows)
- ✅ Confidence (click glowing string)
- ✅ Joy (all jellies celebrate together)
- ✅ Pride (chamber fills with our music)

**Patient Philosophy:**
- ✅ No punishment (amber ripples, no shake)
- ✅ No reset (stay on current note)
- ✅ No timing (click whenever)
- ✅ Gentle guidance (jellies turn toward target)
- ✅ Infinite patience (string keeps glowing)

### Technical Requirements

**Performance:**
- ✅ 6 jellies active (water shader must handle)
- ✅ Smooth swimming paths (no teleporting)
- ✅ String glow from water level (not top-down)
- ✅ 60 FPS with all systems

**Visual:**
- ✅ Clear connection: jelly position ↔ glowing string
- ✅ Ambient swimming looks natural (koi-like)
- ✅ Teaching state is obvious (elevated jelly)
- ✅ Wrong note feedback is water-based (amber ripples)

---

## Implementation Priority

### Week 1: Koi Swimming System
- [ ] Implement 6 jellies with ambient swimming
- [ ] Koi-like movement patterns (curves, drift, sine waves)
- [ ] Jelly stay in water (y: -2 to 0)
- [ ] Beautiful ambient behavior (school formation, gentle pulse)

### Week 2: Teaching Interaction
- [ ] Jelly rise to teaching position (y: 0 → 0.5)
- [ ] String glows from water level up
- [ ] String-jelly connection (pulse sync, visual link)
- [ ] Other jellies form school around target

### Week 3: Player Response
- [ ] Click detection on glowing strings
- [ ] Correct: flash + harmony + all-jelly celebrate
- [ ] Wrong: amber ripples + jelly bob
- [ ] Infinite response window (no timer)

### Week 4: Progression & Polish
- [ ] Sequence types (single, pairs, phrase)
- [ ] Completion chords
- [ ] Particle effects (splash, celebration ripples)
- [ ] Audio polish (spatial, reverb, water resonance)

---

## Conclusion

The koi-like swimming jellies create a beautiful, natural interaction:

**Visual Poetry:**
- Jellies swimming gracefully in water
- One rises to teach, others circle supportively
- String glows in response to jelly below
- All celebrate together in harmony

**Clear Communication:**
- Single visual target: glowing string
- Connection obvious: elevated jelly ↔ glowing string
- Feedback unambiguous: white flash vs amber ripples
- No timing pressure: click whenever ready

**Emotional Experience:**
- Wonder at beautiful swimming
- Understanding through natural connection
- Joy in shared celebration
- Pride in creating music together

**The water sings, the strings respond, and you join the harmony.**